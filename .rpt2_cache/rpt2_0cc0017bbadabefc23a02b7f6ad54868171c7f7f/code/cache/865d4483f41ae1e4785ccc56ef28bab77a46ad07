{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport SoundManager, { SoundConst } from \"../../../manager/SoundManager\";\r\nimport GameEvent from \"../../../common/GameEvent\";\r\nimport { GameData } from \"../../../common/GameData\";\r\nimport GameInfoManager from \"../../../manager/GameInfoManager\";\r\nimport GameConst from \"../../../common/GameConst\";\r\nimport { PopManager } from \"../../../manager/PopManager\";\r\nimport { AwardScene } from \"../pop/AwardScene\";\r\nimport { Prop } from \"../../../manager/GameMgr\";\r\nvar PowerItem = (function (_super) {\r\n    tslib_1.__extends(PowerItem, _super);\r\n    function PowerItem(data) {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"PowerItem\";\r\n        _this.viewData_ = data;\r\n        _this.skin = \"skins/uiView/power/PowerItem.json\";\r\n        return _this;\r\n    }\r\n    PowerItem.prototype.removeEvent = function () {\r\n        this.btn_get.off(Laya.Event.CLICK, this, this.onGetUglify);\r\n    };\r\n    PowerItem.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this.viewData_ = null;\r\n    };\r\n    PowerItem.prototype.setData = function (data) {\r\n        this.viewData_ = data;\r\n        if (this.isCreate) {\r\n            this.initView();\r\n        }\r\n    };\r\n    PowerItem.prototype.initView = function () {\r\n        if (!this.viewData_)\r\n            return;\r\n        var data = this.viewData_;\r\n        this.img_icon.skin = data.id == 1 ? \"resource/assets/imgs/home/main/mianinterface_icon_3.png\" : \"resource/assets/imgs/home/power/\" + data.icon + \".png\";\r\n        this.lab_name.text = data.name;\r\n        this.lab_num.text = \"+\" + data.rewardNum;\r\n        this.btn_get.visible = false;\r\n        this.img_geted.visible = this.lab_tip.visible = false;\r\n        if (data.isGeted) {\r\n            if (data.id == 1) {\r\n                this.lab_tip.visible = true;\r\n            }\r\n            else {\r\n                this.img_geted.visible = true;\r\n            }\r\n        }\r\n        else {\r\n            this.btn_get.visible = true;\r\n            var desc = this.btn_get.getChildByName(\"desc\");\r\n            if (data.canGet) {\r\n                this.btn_get.skin = \"resource/assets/imgs/public/free_button_1.png\";\r\n                desc.text = \"领取\";\r\n                this.btn_get.mouseEnabled = true;\r\n            }\r\n            else {\r\n                this.btn_get.skin = \"resource/assets/imgs/public/free_button_2.png\";\r\n                desc.text = \"未完成\";\r\n                this.btn_get.mouseEnabled = false;\r\n            }\r\n        }\r\n    };\r\n    PowerItem.prototype.onGetUglify = function () {\r\n        var _this = this;\r\n        SoundManager.instance.playEffect(SoundConst.BtnClick);\r\n        PopManager.instance.showPopView({\r\n            className: AwardScene,\r\n            data: {\r\n                type: 1,\r\n                data: {\r\n                    id: Prop.Power,\r\n                    num: this.viewData_.rewardNum,\r\n                    fun: function () {\r\n                        GameData.getInstance().freePower[_this.viewData_.id] = true;\r\n                        GameInfoManager.getInstance().saveInfo(GameConst.FREE_INFO);\r\n                        EventMgr.getInstance().sendEvent(GameEvent.REFRESH_FREE_POWER);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    PowerItem.prototype.adaptationStage = function () {\r\n    };\r\n    PowerItem.prototype.onAddStage = function () {\r\n        _super.prototype.onAddStage.call(this);\r\n        if (this.isCreate) {\r\n            this.initView();\r\n            this.addEvent();\r\n        }\r\n    };\r\n    PowerItem.prototype.addEvent = function () {\r\n        this.btn_get.on(Laya.Event.CLICK, this, this.onGetUglify);\r\n    };\r\n    return PowerItem;\r\n}(BaseSceneUISkin));\r\nexport { PowerItem };\r\n",
  "references": [
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameDataType.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/SoundManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameEvent.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/PowerMgr.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameData.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/GameInfoManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameConst.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/PopManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/views/uiView/pop/AwardScene.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/GameMgr.ts"
  ]
}
