{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { PopBaseScene } from \"../../PopBaseScene\";\r\nimport SoundManager, { SoundConst } from \"../../../manager/SoundManager\";\r\nimport PowerMgr from \"../../../manager/PowerMgr\";\r\nimport { PowerItem } from \"./PowerItem\";\r\nimport GameEvent from \"../../../common/GameEvent\";\r\nimport { MiniManeger } from \"../../../minigame/MiniManeger\";\r\nvar PowerScene = (function (_super) {\r\n    tslib_1.__extends(PowerScene, _super);\r\n    function PowerScene() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"PowerScene\";\r\n        _this.skin = \"skins/uiView/power/PowerView.json\";\r\n        return _this;\r\n    }\r\n    PowerScene.prototype.removeEvent = function () {\r\n        this.btn_close.off(Laya.Event.CLICK, this, this.onCloseUglify);\r\n        EventMgr.getInstance().removeEvent(GameEvent.REFRESH_FREE_POWER, this, this.refreshUIUglify);\r\n    };\r\n    PowerScene.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this.viewData_ = null;\r\n    };\r\n    PowerScene.prototype.showInsertAd = function () {\r\n        MiniManeger.instance.showInsertAd({\r\n            successFun: function () {\r\n            },\r\n            closeFun: function () {\r\n            },\r\n            errorFun: function () {\r\n            }\r\n        });\r\n    };\r\n    PowerScene.prototype.refreshUIUglify = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var dataArr, count, i, item;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, PowerMgr.instance.getFreePowerDataUglify()];\r\n                    case 1:\r\n                        dataArr = _a.sent();\r\n                        this.viewData_ = dataArr;\r\n                        count = dataArr.length;\r\n                        for (i = 0; i < count; i++) {\r\n                            item = this.panel_free.getChildAt(i);\r\n                            if (item) {\r\n                                item.setData(dataArr[i]);\r\n                            }\r\n                            else {\r\n                                item = new PowerItem(dataArr[i]);\r\n                                item.y = (27 + 138) * i;\r\n                                this.panel_free.addChild(item);\r\n                            }\r\n                        }\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PowerScene.prototype.onCloseUglify = function () {\r\n        SoundManager.instance.playEffect(SoundConst.BtnClick);\r\n        this.removeSelf();\r\n    };\r\n    PowerScene.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.panel_free.vScrollBarSkin = \"\";\r\n    };\r\n    PowerScene.prototype.addEvent = function () {\r\n        this.btn_close.on(Laya.Event.CLICK, this, this.onCloseUglify);\r\n        EventMgr.getInstance().addEvent(GameEvent.REFRESH_FREE_POWER, this, this.refreshUIUglify);\r\n    };\r\n    PowerScene.prototype.initView = function () {\r\n        if (DeviceUtil.isMZMiniGame() || DeviceUtil.isTTMiniGame())\r\n            this.showInsertAd();\r\n        this.showCloseBtn(this.btn_close);\r\n        this.refreshUIUglify();\r\n    };\r\n    return PowerScene;\r\n}(PopBaseScene));\r\nexport { PowerScene };\r\n",
  "references": [
    "E:/laya/project/laya_firePeople2_git_ts/src/script/views/PopBaseScene.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameDataType.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/SoundManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/PowerMgr.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/views/uiView/power/PowerItem.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameEvent.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/minigame/MiniManeger.ts"
  ]
}
