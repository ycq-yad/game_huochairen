{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { PopLastScene } from \"../../PopLastScene\";\r\nimport SoundManager, { SoundConst } from \"../../../manager/SoundManager\";\r\nimport { MiniManeger } from \"../../../minigame/MiniManeger\";\r\nimport { GameData } from \"../../../common/GameData\";\r\nimport GameEvent from \"../../../common/GameEvent\";\r\nimport GameMgr, { Prop } from \"../../../manager/GameMgr\";\r\nvar BuyPropScene = (function (_super) {\r\n    tslib_1.__extends(BuyPropScene, _super);\r\n    function BuyPropScene(data_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"BuyPropScene\";\r\n        _this.viewData_ = data_;\r\n        _this.skin = \"skins/uiView/pop/BuyPropView.json\";\r\n        return _this;\r\n    }\r\n    BuyPropScene.prototype.removeEvent = function () {\r\n        this.btn_close.off(Laya.Event.CLICK, this, this.onCloseUglify);\r\n        this.btn_get.off(Laya.Event.CLICK, this, this.onGetUglify);\r\n    };\r\n    BuyPropScene.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this.viewData_ = null;\r\n    };\r\n    BuyPropScene.prototype.showInsertAd = function () {\r\n        MiniManeger.instance.showInsertAd({\r\n            successFun: function () {\r\n            },\r\n            closeFun: function () {\r\n            },\r\n            errorFun: function () {\r\n            }\r\n        });\r\n    };\r\n    BuyPropScene.prototype.onGetUglify = function () {\r\n        SoundManager.instance.playEffect(SoundConst.BtnClick);\r\n        var self = this;\r\n        self.grp_center.mouseEnabled = false;\r\n        if (GameData.getInstance().videoOpen || DeviceUtil.isMZMiniGame()) {\r\n            MiniManeger.instance.playViderAd({\r\n                successFun: function () {\r\n                    self.getAwardUglify();\r\n                },\r\n                failFun: function () {\r\n                    self.grp_center.mouseEnabled = true;\r\n                },\r\n                errorFun: function () {\r\n                    self.grp_center.mouseEnabled = true;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            MiniManeger.instance.shareAppMessage({\r\n                sucFun: function () {\r\n                    self.getAwardUglify();\r\n                },\r\n                failFun: function () {\r\n                    self.grp_center.mouseEnabled = true;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    BuyPropScene.prototype.getAwardUglify = function () {\r\n        var data = this.viewData_;\r\n        if (data.type == 1) {\r\n            GameMgr.instance.updateBaseData(Prop.Power, GameData.getInstance().defaultConfigs.videoBuyPower);\r\n        }\r\n        else {\r\n            GameMgr.instance.updateBaseData(Prop.Gold, GameData.getInstance().defaultConfigs.videoBuyGold);\r\n        }\r\n        this.grp_center.mouseEnabled = true;\r\n    };\r\n    BuyPropScene.prototype.onCloseUglify = function () {\r\n        SoundManager.instance.playEffect(SoundConst.BtnClick);\r\n        EventMgr.getInstance().sendEvent(GameEvent.SHOW_TOP);\r\n        EventMgr.getInstance().sendEvent(GameEvent.ENABLED_TOP, true);\r\n        this.removeSelf();\r\n    };\r\n    BuyPropScene.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        if (GameData.getInstance().videoOpen) {\r\n            this.btn_get.getChildByName(\"icon\").skin = \"resource/assets/imgs/public/game_icon_4.png\";\r\n        }\r\n        else {\r\n            this.btn_get.getChildByName(\"icon\").skin = \"resource/assets/imgs/public/settlement_icon_5.png\";\r\n        }\r\n    };\r\n    BuyPropScene.prototype.addEvent = function () {\r\n        this.btn_close.on(Laya.Event.CLICK, this, this.onCloseUglify);\r\n        this.btn_get.on(Laya.Event.CLICK, this, this.onGetUglify);\r\n    };\r\n    BuyPropScene.prototype.initView = function () {\r\n        if (DeviceUtil.isMZMiniGame() || DeviceUtil.isTTMiniGame())\r\n            this.showInsertAd();\r\n        this.showCloseBtn(this.btn_close);\r\n        EventMgr.getInstance().sendEvent(GameEvent.SHOW_TOP);\r\n        EventMgr.getInstance().sendEvent(GameEvent.ENABLED_TOP, false);\r\n        if (!this.viewData_)\r\n            return;\r\n        var data = this.viewData_;\r\n        if (data.type == 1) {\r\n            this.img_bg.skin = \"resource/assets/imgs/home/main/buy_baseboard_1.png\";\r\n            this.lab_title.text = \"来点体力吧！\";\r\n            this.img_icon.skin = \"resource/assets/imgs/public/mianinterface_icon_1.png\";\r\n            this.lab_num.text = \"+\" + GameData.getInstance().defaultConfigs.videoBuyPower;\r\n        }\r\n        else {\r\n            this.img_bg.skin = \"resource/assets/imgs/home/main/buy_baseboard_2.png\";\r\n            this.lab_title.text = \"来点金币吧！\";\r\n            this.img_icon.skin = \"resource/assets/imgs/public/mianinterface_icon_2.png\";\r\n            this.lab_num.text = \"+\" + GameData.getInstance().defaultConfigs.videoBuyGold;\r\n        }\r\n    };\r\n    return BuyPropScene;\r\n}(PopLastScene));\r\nexport { BuyPropScene };\r\n",
  "references": [
    "E:/laya/project/laya_firePeople2_git_ts/src/script/views/PopLastScene.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/SoundManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameData.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameEvent.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/GameMgr.ts"
  ]
}
