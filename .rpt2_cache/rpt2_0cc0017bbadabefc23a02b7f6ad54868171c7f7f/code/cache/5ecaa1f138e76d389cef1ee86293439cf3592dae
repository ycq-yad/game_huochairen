{
  "code": "var AnimationManager = (function () {\r\n    function AnimationManager() {\r\n    }\r\n    Object.defineProperty(AnimationManager, \"instance\", {\r\n        get: function () {\r\n            if (AnimationManager.ins == null) {\r\n                AnimationManager.ins = new AnimationManager();\r\n            }\r\n            return AnimationManager.ins;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AnimationManager.prototype.pendulumAni = function (target, caller, range, duration) {\r\n        var ani = function () {\r\n            Laya.Tween.to(target, { rotation: range }, duration, null, Laya.Handler.create(caller, function () {\r\n                Laya.Tween.to(target, { rotation: range * -1 }, duration * 2, null, Laya.Handler.create(caller, function () {\r\n                    Laya.Tween.to(target, { rotation: 0 }, duration, null, Laya.Handler.create(caller, function () {\r\n                        ani();\r\n                    }));\r\n                }));\r\n            }));\r\n        };\r\n        ani();\r\n    };\r\n    AnimationManager.prototype.runaroundTween = function (target, caller, duration) {\r\n        if (duration === void 0) { duration = 2000; }\r\n        target.visible = true;\r\n        target.rotation = 0;\r\n        var tw = Laya.Tween.to(target, { rotation: 360 }, duration, null, null, 0, false, false);\r\n        tw.repeat = 0;\r\n    };\r\n    AnimationManager.prototype.btnScaleAniLoop = function (target, caller, startScale, endScale, duration, ease) {\r\n        if (startScale === void 0) { startScale = 1; }\r\n        if (endScale === void 0) { endScale = 1.2; }\r\n        if (duration === void 0) { duration = 500; }\r\n        target.scale(startScale, startScale);\r\n        var fun = function () {\r\n            Laya.Tween.to(target, { scaleX: endScale, scaleY: endScale }, duration, ease, Laya.Handler.create(caller, function () {\r\n                Laya.Tween.to(target, { scaleX: startScale, scaleY: startScale }, duration, ease, Laya.Handler.create(caller, function () {\r\n                    fun();\r\n                }));\r\n            }));\r\n        };\r\n        fun();\r\n    };\r\n    AnimationManager.prototype.tipPointShake = function (target, play) {\r\n        var _this = this;\r\n        if (play) {\r\n            Laya.Tween.clearAll(target);\r\n            Laya.timer.clearAll(target);\r\n            target.rotation = 0;\r\n            var ani_1 = function (num) {\r\n                Laya.Tween.to(target, { rotation: 10 }, 100, null, Laya.Handler.create(_this, function () {\r\n                    Laya.Tween.to(target, { rotation: -10 }, 200, null, Laya.Handler.create(_this, function () {\r\n                        Laya.Tween.to(target, { rotation: 0 }, 100, null, Laya.Handler.create(_this, function () {\r\n                            num--;\r\n                            if (num) {\r\n                                ani_1(num);\r\n                            }\r\n                            else {\r\n                                var time = Utils.getRandom(1000, 3000);\r\n                                Laya.timer.once(time, target, function () { ani_1(2); });\r\n                            }\r\n                        }));\r\n                    }));\r\n                }));\r\n            };\r\n            var delay = Utils.getRandom(500, 1000);\r\n            Laya.timer.once(delay, target, function () { ani_1(2); });\r\n        }\r\n        else {\r\n            Laya.timer.clearAll(target);\r\n            Laya.Tween.clearAll(target);\r\n            target.rotation = 0;\r\n        }\r\n    };\r\n    AnimationManager.prototype.scaleTween = function (target, caller, duration, complete, props, ease) {\r\n        if (duration === void 0) { duration = 500; }\r\n        target.visible = true;\r\n        target.scale(0.8, 0.8);\r\n        Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {\r\n            complete && complete();\r\n        }));\r\n    };\r\n    AnimationManager.prototype.creatBoonAnimation = function (url) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var boomAnimation = new Laya.Skeleton();\r\n            boomAnimation.load(url, Laya.Handler.create(_this, function () {\r\n                if (!boomAnimation.player) {\r\n                    resolve(null);\r\n                }\r\n                else {\r\n                    boomAnimation.player.playbackRate = 1;\r\n                    resolve(boomAnimation);\r\n                }\r\n            }));\r\n        });\r\n    };\r\n    AnimationManager.prototype.getAtlasAnimation = function (url, fex) {\r\n        url = url + fex;\r\n        return new Promise(function (resolve) {\r\n            var roleAni = new Laya.Animation();\r\n            roleAni.loadAtlas(url, Laya.Handler.create(null, function () {\r\n                resolve(roleAni);\r\n            }));\r\n        });\r\n    };\r\n    AnimationManager.prototype.scaleBTween = function (target, caller, duration, complete, props, ease) {\r\n        if (duration === void 0) { duration = 500; }\r\n        target.scale(1.1, 1.1);\r\n        Laya.Tween.to(target, { scaleX: 1, scaleY: 1 }, duration, ease, Laya.Handler.create(caller, function () {\r\n            complete && complete();\r\n        }));\r\n    };\r\n    AnimationManager.prototype.show2dBoonAnimation = function (url, dbBox, index, loop, rate, x, y, rotation) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var self = _this;\r\n            dbBox.removeChildren();\r\n            var boomAnimation = new Laya.Skeleton();\r\n            boomAnimation.load(url, Laya.Handler.create(self, function () {\r\n                if (!boomAnimation.player) {\r\n                    resolve();\r\n                    return;\r\n                }\r\n                boomAnimation.player.playbackRate = rate;\r\n                boomAnimation.player.once(Laya.Event.STOPPED, self, function () {\r\n                    resolve();\r\n                });\r\n                boomAnimation.scale(2, 2);\r\n                dbBox.addChild(boomAnimation);\r\n                boomAnimation.x = x;\r\n                boomAnimation.y = y;\r\n                boomAnimation.rotation = rotation;\r\n                boomAnimation.play(index, loop);\r\n            }));\r\n        });\r\n    };\r\n    AnimationManager.prototype.displayTwinkle = function (target, prefix, caller) {\r\n        var index = 1;\r\n        Laya.timer.loop(500, caller, function () {\r\n            target.skin = prefix + index + \".png\";\r\n            index = index == 1 ? 2 : 1;\r\n        });\r\n    };\r\n    AnimationManager.prototype.frameAni = function (target, prefix, caller, frameNum, time) {\r\n        if (time === void 0) { time = 100; }\r\n        var index = 1;\r\n        Laya.timer.loop(time, caller, function () {\r\n            target.skin = prefix + index + \".png\";\r\n            index++;\r\n            if (index > frameNum)\r\n                index = 1;\r\n        });\r\n    };\r\n    return AnimationManager;\r\n}());\r\nexport default AnimationManager;\r\n",
  "references": []
}
