{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport AnimationManager from \"../../../manager/AnimationManager\";\r\nimport { DYMoreGameDrawerItem } from \"./DYMoreGameDrawerItem\";\r\nimport DYChannelMgr from \"../../../manager/channel/DYChannelMgr\";\r\nvar DYMoreGameDrawer = (function (_super) {\r\n    tslib_1.__extends(DYMoreGameDrawer, _super);\r\n    function DYMoreGameDrawer() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"DYMoreGameDrawer\";\r\n        _this.isShow = false;\r\n        _this.isPlaying = false;\r\n        _this.autoMove = true;\r\n        _this.nStartY = 0;\r\n        _this.name = \"DYMoreGameDrawer\";\r\n        _this.skin = \"skins/channel/duyou/DYMoreGameDrawer.json\";\r\n        return _this;\r\n    }\r\n    DYMoreGameDrawer.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n        this.box_db.width = Laya.stage.width;\r\n        this.box_db.height = Laya.stage.height;\r\n        this.mouseThrough = true;\r\n    };\r\n    DYMoreGameDrawer.prototype.onAddStage = function () {\r\n        if (this.isCreate) {\r\n            this.addEvent();\r\n            this.initView();\r\n        }\r\n    };\r\n    DYMoreGameDrawer.prototype.addEvent = function () {\r\n        this.btn_switch.on(Laya.Event.CLICK, this, this.onSwitch);\r\n        this.box_db.on(Laya.Event.CLICK, this, this.onSwitch);\r\n        this.panel_list.on(Laya.Event.MOUSE_DOWN, this, this.onMousedown);\r\n    };\r\n    DYMoreGameDrawer.prototype.initView = function () {\r\n        this.box_db.visible = false;\r\n        this.isPlaying = false;\r\n        this.btn_switch.skin = \"resource/assets/channel/duyou/game_button_2.png\";\r\n        this.box_content.right = -713;\r\n        this.isShow = false;\r\n        this.img_tips_p.visible = true;\r\n        AnimationManager.instance.tipPointShake(this.img_tips_p, true);\r\n    };\r\n    DYMoreGameDrawer.prototype.onSwitch = function () {\r\n        if (this.isPlaying)\r\n            return;\r\n        this.isShow = !this.isShow;\r\n        this.switchShow(this.isShow);\r\n    };\r\n    DYMoreGameDrawer.prototype.switchShow = function (show, time) {\r\n        var _this = this;\r\n        if (time === void 0) { time = 300; }\r\n        if (this.isPlaying)\r\n            return;\r\n        this.isShow = show;\r\n        this.isPlaying = true;\r\n        if (this.isShow) {\r\n            this.box_db.visible = true;\r\n            Laya.Tween.to(this.box_content, { right: 0 }, time, null, Laya.Handler.create(this, function () {\r\n                _this.initList();\r\n                _this.btn_switch.skin = \"resource/assets/channel/duyou/game_button_3.png\";\r\n                _this.img_tips_p.visible = false;\r\n                _this.isPlaying = false;\r\n            }));\r\n        }\r\n        else {\r\n            Laya.Tween.to(this.box_content, { right: -713 }, time, null, Laya.Handler.create(this, function () {\r\n                Laya.timer.clearAll(_this);\r\n                _this.btn_switch.skin = \"resource/assets/channel/duyou/game_button_2.png\";\r\n                _this.box_db.visible = false;\r\n                _this.img_tips_p.visible = true;\r\n                _this.isPlaying = false;\r\n            }));\r\n        }\r\n    };\r\n    DYMoreGameDrawer.prototype.initList = function () {\r\n        var nXStart = 0;\r\n        var nYStart = 0;\r\n        var nCount = 3;\r\n        var aryInfo = [];\r\n        aryInfo = DYChannelMgr.instance.getRandomIndex(12);\r\n        this.box_game1.removeChildren();\r\n        this.box_game1.y = 0;\r\n        for (var i = 0; i < aryInfo.length; ++i) {\r\n            var item = this.box_game1.getChildAt(i);\r\n            if (item) {\r\n                item.setData(aryInfo[i]);\r\n            }\r\n            else {\r\n                item = Laya.Pool.getItemByClass(\"DYMoreGameDrawerItem\", DYMoreGameDrawerItem);\r\n                item.setData(aryInfo[i]);\r\n                var nAddX = Math.floor(i % nCount);\r\n                var nYAdd = Math.floor(i / nCount);\r\n                item.x = nXStart + item.width * nAddX + 15 * nAddX;\r\n                item.y = nYStart + item.height * nYAdd + 10 * nYAdd;\r\n                this.box_game1.addChild(item);\r\n                this.box_game1.height = item.y + item.height + 10;\r\n            }\r\n        }\r\n        this.box_game2.y = this.box_game1.height;\r\n        this.box_game2.removeChildren();\r\n        for (var i = 0; i < aryInfo.length; ++i) {\r\n            var item = this.box_game2.getChildAt(i);\r\n            if (item) {\r\n                item.setData(aryInfo[i]);\r\n            }\r\n            else {\r\n                item = Laya.Pool.getItemByClass(\"DYMoreGameDrawerItem\", DYMoreGameDrawerItem);\r\n                item.setData(aryInfo[i]);\r\n                var nAddX = Math.floor(i % nCount);\r\n                var nYAdd = Math.floor(i / nCount);\r\n                item.x = nXStart + item.width * nAddX + 15 * nAddX;\r\n                item.y = nYStart + item.height * nYAdd + 10 * nYAdd;\r\n                this.box_game2.addChild(item);\r\n                this.box_game2.height = item.y + item.height + 10;\r\n            }\r\n        }\r\n        if (aryInfo.length) {\r\n            this.autoMove = true;\r\n            Laya.timer.frameLoop(1, this, this.onMove);\r\n        }\r\n        DYChannelMgr.instance.refreshGameList();\r\n    };\r\n    DYMoreGameDrawer.prototype.onMove = function () {\r\n        if (!this.autoMove)\r\n            return;\r\n        var nHight = this.box_game1.height;\r\n        this.box_game2.y -= 1.5;\r\n        this.box_game1.y -= 1.5;\r\n        if (this.box_game1.y <= -nHight) {\r\n            this.box_game1.y = this.box_game2.y + nHight;\r\n        }\r\n        if (this.box_game2.y <= -nHight) {\r\n            this.box_game2.y = this.box_game1.y + nHight;\r\n        }\r\n    };\r\n    DYMoreGameDrawer.prototype.onMousedown = function (evt) {\r\n        var _this = this;\r\n        this.autoMove = false;\r\n        this.nStartY = evt.currentTarget.mouseY;\r\n        var self = this;\r\n        var mouseMove = function (evt1) {\r\n            var nYTemp = self.nStartY - evt1.currentTarget.mouseY;\r\n            self.box_game1.y -= nYTemp;\r\n            self.box_game2.y -= nYTemp;\r\n            self.nStartY = evt1.currentTarget.mouseY;\r\n            if (self.box_game1.y >= 0 && self.box_game2.y >= 0) {\r\n                self.box_game1.y = 0;\r\n                self.box_game2.y = self.box_game1.height;\r\n            }\r\n        };\r\n        var mouseUp = function (evt1) {\r\n            _this.panel_list.off(Laya.Event.MOUSE_MOVE, _this, mouseMove);\r\n            _this.panel_list.off(Laya.Event.MOUSE_UP, _this, mouseUp);\r\n            _this.panel_list.off(Laya.Event.MOUSE_OUT, _this, mouseUp);\r\n            _this.autoMove = true;\r\n        };\r\n        this.panel_list.on(Laya.Event.MOUSE_MOVE, this, mouseMove);\r\n        this.panel_list.on(Laya.Event.MOUSE_UP, this, mouseUp);\r\n        this.panel_list.on(Laya.Event.MOUSE_OUT, this, mouseUp);\r\n    };\r\n    DYMoreGameDrawer.prototype.removeEvent = function () {\r\n        this.btn_switch.off(Laya.Event.CLICK, this, this.onSwitch);\r\n        this.box_db.off(Laya.Event.CLICK, this, this.onSwitch);\r\n        this.panel_list.off(Laya.Event.MOUSE_DOWN, this, this.onMousedown);\r\n    };\r\n    DYMoreGameDrawer.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n        this.isPlaying = false;\r\n        this.isShow = false;\r\n        Laya.timer.clearAll(this);\r\n        AnimationManager.instance.tipPointShake(this.img_tips_p, false);\r\n    };\r\n    return DYMoreGameDrawer;\r\n}(BaseSceneUISkin));\r\nexport { DYMoreGameDrawer };\r\n",
  "references": [
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/AnimationManager.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/views/channel/duyou/DYMoreGameDrawerItem.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/manager/channel/DYChannelMgr.ts"
  ]
}
