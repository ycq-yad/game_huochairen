{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { MiniManeger } from \"./MiniManeger\";\r\nimport { GameData } from \"../common/GameData\";\r\nimport GameEvent from \"../common/GameEvent\";\r\nvar TTGameMgr = (function (_super) {\r\n    tslib_1.__extends(TTGameMgr, _super);\r\n    function TTGameMgr() {\r\n        var _this = _super.call(this) || this;\r\n        _this.appid = \"ttab04ddb9343eae0c\";\r\n        _this.secret = \"96041680ac7134161d59d18faec128ce44f4cbfb\";\r\n        _this.url = \"https://yxtest.32yx.com/MiniGame.fcgi\";\r\n        _this.hideTime = 0;\r\n        _this.showTime = 0;\r\n        _this.sucTime = 3000;\r\n        _this.defaultMssage = {\r\n            \"title\": \"我被卡在了第一关，快来帮帮我\",\r\n            \"imageUrl\": \"https://package.32yx.com/ecy_game_small/laya/firePeople2/wx_res/share1.jpg\",\r\n            \"query\": \"\"\r\n        };\r\n        _this.shareInfo = [\r\n            {\r\n                \"title\": \"我被卡在了第一关，快来帮帮我\",\r\n                \"imageUrl\": \"https://package.32yx.com/ecy_game_small/laya/firePeople2/wx_res/share1.jpg\",\r\n                \"query\": \"\"\r\n            }\r\n        ];\r\n        _this.canShowBanner = true;\r\n        _this.maxMakeVideoTime = 120;\r\n        _this.startTime = 0;\r\n        _this.initGameRecordListener();\r\n        return _this;\r\n    }\r\n    TTGameMgr.prototype.initMiniGame = function () {\r\n        var _this = this;\r\n        this.launchOption = tt.getLaunchOptionsSync();\r\n        console.log(\"launchOption >> \", this.launchOption);\r\n        this.systemInfo = tt.getSystemInfoSync();\r\n        console.log(\"systemInfo >> \", this.systemInfo);\r\n        tt.setKeepScreenOn({ keepScreenOn: true });\r\n        tt.showShareMenu({ withShareTicket: true });\r\n        tt.onShareAppMessage(function () {\r\n            return _this.defaultMssage;\r\n        });\r\n        this.getUpdateManager();\r\n        this.initMoreGameAppInfos();\r\n        Laya.timer.once(10000, this, function () {\r\n            console.log(\"加速回收---\");\r\n            tt.triggerGC();\r\n        });\r\n    };\r\n    TTGameMgr.prototype.onShow = function (callBack) {\r\n        var _this = this;\r\n        tt.onShow(function (res) {\r\n            callBack && callBack(res);\r\n            _this.showTime = new Date().getTime();\r\n            if (_this.showTime - _this.hideTime >= _this.sucTime) {\r\n                _this.shareSucFun && _this.shareSucFun.call(_this.thisObj);\r\n            }\r\n            else {\r\n                _this.shareFailFun && _this.shareFailFun.call(_this.thisObj);\r\n            }\r\n            _this.shareSucFun = null;\r\n            _this.shareFailFun = null;\r\n            _this.thisObj = null;\r\n            EventMgr.getInstance().sendEvent(GameEvent.ONSHOW);\r\n        });\r\n    };\r\n    TTGameMgr.prototype.onHide = function (callBack) {\r\n        var _this = this;\r\n        tt.onHide(function () {\r\n            callBack && callBack();\r\n            _this.hideTime = new Date().getTime();\r\n            EventMgr.getInstance().sendEvent(GameEvent.ONHIDE);\r\n        });\r\n    };\r\n    TTGameMgr.prototype.loginGame = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.login().then(function (res) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            res = JSON.parse(res);\r\n                            GameData.getInstance().userInfo.openId = res.openid;\r\n                            GameData.getInstance().userInfo.sessionKey = res.session_key;\r\n                            return [4, this.initUserInfo()];\r\n                        case 1:\r\n                            _a.sent();\r\n                            resolve();\r\n                            return [2];\r\n                    }\r\n                });\r\n            }); }).catch(function (err) {\r\n                resolve();\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.checkSession = function () {\r\n        return new Promise(function (resolve) {\r\n            tt.checkSession({\r\n                success: function (res) {\r\n                    console.log(\"session未过期\", res);\r\n                    resolve(false);\r\n                },\r\n                fail: function (res) {\r\n                    console.log(\"session已过期，需要重新登录\", res);\r\n                    resolve(true);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.login = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            tt.login({\r\n                force: false,\r\n                success: function (res) {\r\n                    if (res.code) {\r\n                        console.log(\"code：\", res.code);\r\n                        var urlappend = \"appid=\" + _this.appid + \"&secret=\" + _this.secret + \"&code=\" + res.code + \"&anonymous_code=\" + res.anonymousCode;\r\n                        tt.request({\r\n                            url: _this.url,\r\n                            method: \"POST\",\r\n                            data: {\r\n                                msg_type: \"5\",\r\n                                msg_data: {\r\n                                    url_append: urlappend,\r\n                                }\r\n                            },\r\n                            success: function (res2) {\r\n                                console.log(\"getsisson 返回：\", res2);\r\n                                resolve(res2.data.msg_data);\r\n                            },\r\n                            fail: function (res3) {\r\n                                console.warn(\"网络请求失败：\", res3);\r\n                                reject();\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        console.warn(\"登录失败：\", res);\r\n                        reject();\r\n                    }\r\n                },\r\n                fail: function (err) {\r\n                    console.warn(\"login调用失败\", err);\r\n                    reject();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.queryAuthorization = function (scope) {\r\n        return new Promise(function (resolve) {\r\n            tt.getSetting({\r\n                success: function (res) {\r\n                    if (res.authSetting[scope]) {\r\n                        resolve(true);\r\n                    }\r\n                    else {\r\n                        resolve(false);\r\n                    }\r\n                },\r\n                fail: function (res) {\r\n                    resolve(false);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.getUserInfo = function () {\r\n        return new Promise(function (resolve) {\r\n            tt.getUserInfo({\r\n                withCredentials: false,\r\n                success: function (res) {\r\n                    console.log(\"获取用户信息成功！\", res);\r\n                    resolve(res.userInfo);\r\n                },\r\n                fail: function (res) {\r\n                    console.warn(\"用户未授权\", res);\r\n                    resolve(null);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.initUserInfo = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var info;\r\n            var _this = this;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.getUserInfo()];\r\n                    case 1:\r\n                        info = _a.sent();\r\n                        console.log(\"获取用户的基本信息:\", info);\r\n                        if (info) {\r\n                            GameData.getInstance().userInfo.nick = info.nickName;\r\n                            GameData.getInstance().userInfo.avatarUrl = info.avatarUrl;\r\n                            GameData.getInstance().userInfo.sex = info.gender;\r\n                            this.defaultMssage.query = \"openid=\" + GameData.getInstance().userInfo.openId;\r\n                            tt.onShareAppMessage(function () {\r\n                                return _this.defaultMssage;\r\n                            });\r\n                        }\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TTGameMgr.prototype.getUpdateManager = function () {\r\n        var updateManager = tt.getUpdateManager();\r\n        updateManager.onCheckForUpdate(function (res) {\r\n            console.log(\"是否有新版本:\", res);\r\n        });\r\n        updateManager.onUpdateReady(function () {\r\n            tt.showModal({\r\n                title: \"更新提示\",\r\n                showCancel: false,\r\n                content: \"新版本已经准备好，是否重启应用？\",\r\n                success: function (res) {\r\n                    res.confirm && updateManager.applyUpdate();\r\n                }\r\n            });\r\n        });\r\n        updateManager.onUpdateFailed(function (err) {\r\n            console.warn(\"新版本更新失败:\", err);\r\n        });\r\n    };\r\n    TTGameMgr.prototype.getShareInfo = function (query) {\r\n        var shareInfo = this.shareInfo;\r\n        var info = shareInfo[Math.floor(Math.random() * shareInfo.length)];\r\n        if (query) {\r\n            var openId = GameData.getInstance().userInfo.openId;\r\n            query[\"openid\"] = openId;\r\n        }\r\n        info.query = Utils.querStr(query);\r\n        return info;\r\n    };\r\n    TTGameMgr.prototype.shareAppMessage = function (data) {\r\n        if (!data)\r\n            data = {};\r\n        this.shareSucFun = data.sucFun;\r\n        this.shareFailFun = function () {\r\n            TipsManager.getInstance().showDefaultTips(\"分享失败，请分享到群里\");\r\n            data.failFun && data.failFun();\r\n            ;\r\n        };\r\n        this.thisObj = data.thisObj;\r\n        this.sucTime = data.time || this.sucTime;\r\n        if (!data.message) {\r\n            data.message = this.getShareInfo({});\r\n        }\r\n        tt.shareAppMessage(data.message);\r\n    };\r\n    TTGameMgr.prototype.playViderAd = function (data) {\r\n        var _this = this;\r\n        var videoId = this.infos.videoId;\r\n        if (data.isLongVideo) {\r\n            videoId = this.infos.longVideoId;\r\n        }\r\n        if (videoId.length <= 0) {\r\n            TipsManager.getInstance().showDefaultTips(\"开发中\");\r\n            data.errorFun && data.errorFun();\r\n            return;\r\n        }\r\n        tt.showLoading({ title: \"广告加载中\" });\r\n        if (!this.videoAd) {\r\n            var adId = videoId[Math.floor(Math.random() * videoId.length)];\r\n            this.videoAd = tt.createRewardedVideoAd({\r\n                adUnitId: adId\r\n            });\r\n            this.videoAd.onLoad(function (res) {\r\n                console.log(\"激励视频广告 加载成功\", res);\r\n            });\r\n        }\r\n        var closeCall = function (res) {\r\n            console.log(\"激励视频广告 关闭\", res);\r\n            if (res.isEnded) {\r\n                data.successFun && data.successFun();\r\n            }\r\n            else {\r\n                data.failFun && data.failFun();\r\n            }\r\n            _this.videoAd.offClose(closeCall);\r\n            _this.videoAd.offError(errorCall);\r\n            tt.hideLoading({});\r\n        };\r\n        var errorCall = function (err) {\r\n            console.warn(\"激励视频广告 错误\", err);\r\n            data.errorFun && data.errorFun(err);\r\n            _this.videoAd.offClose(closeCall);\r\n            _this.videoAd.offError(errorCall);\r\n            tt.hideLoading({});\r\n        };\r\n        this.videoAd.onClose(closeCall);\r\n        this.videoAd.onError(errorCall);\r\n        this.videoAd.load().then(function () {\r\n            console.log(\"激励视频广告 加载成功\");\r\n            _this.videoAd.show().then(function () {\r\n                console.log(\"激励视频广告 显示成功\");\r\n                tt.hideLoading({});\r\n            }).catch(function (err) {\r\n                console.warn(\"激励视频广告 显示失败\", err);\r\n                errorCall(err);\r\n            });\r\n        }).catch(function (err) {\r\n            console.warn(\"激励视频广告 加载失败\", err);\r\n            errorCall(err);\r\n        });\r\n    };\r\n    TTGameMgr.prototype.showBannerAd = function (offset) {\r\n        var _this = this;\r\n        if (!this.infos.bannerOpen)\r\n            return;\r\n        if (this.getAppName() == \"Douyin\") {\r\n            return;\r\n        }\r\n        this.canShowBanner = true;\r\n        var bannerId = this.infos.bannerId;\r\n        if (bannerId.length <= 0)\r\n            return;\r\n        var errorFun = function (err) {\r\n            console.warn(\"banner 广告 onError \", err);\r\n        };\r\n        var createFun = function () {\r\n            var adId = bannerId[Math.floor(Math.random() * bannerId.length)];\r\n            console.log(\"创建 banner 广告组件-->\", adId);\r\n            var phone = _this.systemInfo;\r\n            var w = phone.windowWidth;\r\n            var h = phone.windowHeight;\r\n            _this.clearBannerFun && _this.clearBannerFun();\r\n            _this.clearBannerFun = null;\r\n            var bannerAd = tt.createBannerAd({\r\n                adUnitId: adId,\r\n                adIntervals: 60,\r\n                style: { top: 0, left: 0, width: 200 }\r\n            });\r\n            var resizeFun = function (res) {\r\n                bannerAd.style.left = (w - res.width) / 2;\r\n                bannerAd.style.top = h - res.height;\r\n                console.log(\"banner 广告 onResize \", res, bannerAd);\r\n            };\r\n            var loadFun = function (res) {\r\n                console.log(\"banner 广告 onLoad 成功\", res);\r\n                _this.bannerAd = bannerAd;\r\n                _this.bannerAd.offLoad(loadFun);\r\n                _this.bannerAd.offError(errorFun);\r\n                showFun();\r\n            };\r\n            bannerAd.onError(errorFun);\r\n            bannerAd.onLoad(loadFun);\r\n            bannerAd.onResize(resizeFun);\r\n            _this.clearBannerFun = function () {\r\n                if (_this.bannerAd) {\r\n                    _this.bannerAd.offLoad(loadFun);\r\n                    _this.bannerAd.offResize(resizeFun);\r\n                    _this.bannerAd.offError(resizeFun);\r\n                }\r\n            };\r\n        };\r\n        var showFun = function () {\r\n            if (_this.canShowBanner) {\r\n                _this.bannerAd.show().then(function () {\r\n                    console.log(\"banner广告展示完成\");\r\n                    if (offset) {\r\n                        offset.callback && offset.callback();\r\n                    }\r\n                }).catch(function (err) {\r\n                    errorFun(err);\r\n                });\r\n            }\r\n            else {\r\n                _this.bannerAd.hide();\r\n            }\r\n        };\r\n        if (!this.bannerAd) {\r\n            createFun();\r\n        }\r\n        else {\r\n            showFun();\r\n        }\r\n    };\r\n    TTGameMgr.prototype.hideBanner = function () {\r\n        this.bannerAd && this.bannerAd.hide();\r\n        this.canShowBanner = false;\r\n    };\r\n    TTGameMgr.prototype.destoryBanner = function () {\r\n        this.bannerAd && this.bannerAd.destroy();\r\n        this.clearBannerFun && this.clearBannerFun();\r\n        this.clearBannerFun = null;\r\n    };\r\n    TTGameMgr.prototype.showInsertAd = function (data) {\r\n        var _this = this;\r\n        if (DeviceUtil.isIOS() || window[\"screenOrientation\"].indexOf(\"landscape\") > -1) {\r\n            data.closeFun && data.closeFun();\r\n            return;\r\n        }\r\n        if (this.getAppName() == \"Toutiao\" && this.infos.intersOpen) {\r\n            var intersId = this.infos.intersId;\r\n            if (intersId.length <= 0)\r\n                return;\r\n            var adId = intersId[Math.floor(Math.random() * intersId.length)];\r\n            console.log(\"创建插屏广告组件-->\", adId);\r\n            this.insertAd = tt.createInterstitialAd({\r\n                adUnitId: adId\r\n            });\r\n            var closeCall_1 = function (res) {\r\n                console.log(\"插屏广告关闭\", res);\r\n                data.closeFun && data.closeFun();\r\n                _this.insertAd.offError(errorCall_1);\r\n                _this.insertAd.offClose(closeCall_1);\r\n                _this.insertAd.destroy && _this.insertAd.destroy();\r\n            };\r\n            var errorCall_1 = function (err) {\r\n                console.log(\"插屏广告错误\", err);\r\n                data.errorFun && data.errorFun();\r\n                _this.insertAd.offError(errorCall_1);\r\n                _this.insertAd.offClose(closeCall_1);\r\n                _this.insertAd.destroy && _this.insertAd.destroy();\r\n            };\r\n            this.insertAd.onError(errorCall_1);\r\n            this.insertAd.onClose(closeCall_1);\r\n            this.insertAd.load().then(function () {\r\n                console.log(\"插屏广告 加载成功\");\r\n                _this.insertAd.show().then(function () {\r\n                    console.log(\"插屏广告 显示成功\");\r\n                    data.successFun && data.successFun();\r\n                }).catch(function (err) {\r\n                    console.warn(\"插屏广告 显示失败\", err);\r\n                    errorCall_1(err);\r\n                });\r\n            }).catch(function (err) {\r\n                console.warn(\"插屏广告 加载失败\", err);\r\n                errorCall_1(err);\r\n            });\r\n        }\r\n        else {\r\n            data.closeFun && data.closeFun();\r\n        }\r\n    };\r\n    TTGameMgr.prototype.initGameRecordListener = function () {\r\n        var _this = this;\r\n        if (!this.gameRecorder)\r\n            this.gameRecorder = tt.getGameRecorderManager();\r\n        this.gameRecorder.onStart(function (res) {\r\n            console.log(\"录屏开始:\", res);\r\n            _this.startTime = (new Date()).getTime();\r\n        });\r\n        this.gameRecorder.onStop(function (res) {\r\n            console.log(\"录屏结束:\", res);\r\n            _this.recordStopFun && _this.recordStopFun();\r\n            _this.recordStopFun = null;\r\n            var now = (new Date()).getTime();\r\n            if (now - _this.startTime <= 3000) {\r\n                _this.tempVideoPath = null;\r\n                tt.showModal({\r\n                    title: \"系统提示\", content: \"需要录制3秒以上哟\", showCancel: false, cancelText: \"\", confirmText: \"确定\",\r\n                    success: function () {\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n            _this.tempVideoPath = res.videoPath;\r\n        });\r\n        this.gameRecorder.onError(function (err) {\r\n            console.log(\"录屏错误:\", err);\r\n        });\r\n        this.gameRecorder.onPause(function (res) {\r\n            console.log(\"录屏已暂停:\", res);\r\n        });\r\n        this.gameRecorder.onResume(function (res) {\r\n            console.log(\"录屏已恢复:\", res);\r\n        });\r\n        this.gameRecorder.onInterruptionBegin(function () {\r\n            _this.gameRecorder.pause();\r\n        });\r\n        this.gameRecorder.onInterruptionEnd(function () {\r\n            _this.gameRecorder.resume();\r\n        });\r\n    };\r\n    TTGameMgr.prototype.startGameRecord = function (data) {\r\n        if (!DeviceUtil.isTTMiniGame() || this.isRecording)\r\n            return;\r\n        if (!this.gameRecorder)\r\n            this.initGameRecordListener();\r\n        this.tempVideoPath = null;\r\n        this.recordStopFun = data.stopFun;\r\n        this.isRecording = true;\r\n        this.indexTime = 0;\r\n        this.gameRecorder.start({ duration: this.maxMakeVideoTime });\r\n        Laya.timer.loop(1000, this, this.loopTime);\r\n    };\r\n    TTGameMgr.prototype.loopTime = function () {\r\n        this.indexTime++;\r\n        if (this.indexTime >= this.maxMakeVideoTime) {\r\n            console.log(\"录制结束\");\r\n            this.stopGameRecord();\r\n        }\r\n    };\r\n    TTGameMgr.prototype.stopGameRecord = function (force) {\r\n        if (force === void 0) { force = false; }\r\n        console.log(\"stopGameRecord  录制时长：\", this.indexTime);\r\n        if (this.isRecording) {\r\n            if (force) {\r\n                Laya.timer.clear(this, this.loopTime);\r\n                this.isRecording = false;\r\n                this.gameRecorder.stop();\r\n                return;\r\n            }\r\n            if (this.indexTime <= 3) {\r\n                TipsManager.getInstance().showDefaultTips(\"录制视频时间不能小于3秒哦!\");\r\n                this.tempVideoPath = null;\r\n                return;\r\n            }\r\n            Laya.timer.clear(this, this.loopTime);\r\n            this.isRecording = false;\r\n            this.gameRecorder.stop();\r\n        }\r\n    };\r\n    TTGameMgr.prototype.shareGameVideo = function (data) {\r\n        if (!DeviceUtil.isTTMiniGame())\r\n            return;\r\n        if (!this.tempVideoPath || this.tempVideoPath.length == 0) {\r\n            data.failFun && data.failFun();\r\n            TipsManager.getInstance().showDefaultTips(\"暂未录制视频哦!\");\r\n            return;\r\n        }\r\n        if (!data)\r\n            data = {};\r\n        console.log(\"分享游戏视频--\");\r\n        tt.shareAppMessage({\r\n            channel: \"video\",\r\n            title: \"火柴人之奇葩画\",\r\n            desc: \"火柴人之奇葩画\",\r\n            imageUrl: \"\",\r\n            templateId: \"\",\r\n            query: \"openId=\" + GameData.getInstance().userInfo.openId + \"&nick=\" + GameData.getInstance().userInfo.nick,\r\n            extra: {\r\n                videoPath: this.tempVideoPath\r\n            },\r\n            success: function () {\r\n                console.log(\"分享视频成功\");\r\n                data.successFun && data.successFun();\r\n            },\r\n            fail: function (err) {\r\n                console.log(\"分享视频失败\", err);\r\n                data.failFun && data.failFun();\r\n                TipsManager.getInstance().showDefaultTips(\"视频分享失败！\");\r\n            }\r\n        });\r\n    };\r\n    TTGameMgr.prototype.vibrateShort = function (data) {\r\n        if (!GameData.getInstance().shakeIsOpen)\r\n            return;\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            tt.vibrateShort(data);\r\n        }\r\n    };\r\n    TTGameMgr.prototype.vibrateLong = function () {\r\n        if (!GameData.getInstance().shakeIsOpen)\r\n            return;\r\n        if (DeviceUtil.isTTMiniGame()) {\r\n            tt.vibrateLong({});\r\n        }\r\n    };\r\n    TTGameMgr.prototype.initMoreGameAppInfos = function () {\r\n        this.moreGameAppInfos = [];\r\n        var res = [\r\n            { \"appid\": \"tt5c622adfc34851be\", \"title\": \"杠精大乱斗\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/pole_jump.png\" },\r\n            { \"appid\": \"tt4e7138ccd15b7caa\", \"title\": \"巴掌王3D\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/slap_king.png\" },\r\n            { \"appid\": \"tt7e0808b5e1224cd6\", \"title\": \"穿越空间\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/cykj.png\" },\r\n            { \"appid\": \"tt9c09eab4032391c1\", \"title\": \"消消来了\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/xxll.jpg\" },\r\n            { \"appid\": \"tt18956e2887bf2f24\", \"title\": \"篮球大作战\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/kltl.jpg\" },\r\n            { \"appid\": \"ttfdfc8b4162d6c8ab\", \"title\": \"萌兵战争\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/mbzz.jpg\" },\r\n            { \"appid\": \"tte3a3951e7c899dfd\", \"title\": \"疯狂跳床\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/jump.png\" },\r\n            { \"appid\": \"tt546f22d2cb457cd0\", \"title\": \"超级购物狂\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/crazy_shopping.jpg\" },\r\n            { \"appid\": \"tt8c7bfac613516af9\", \"title\": \"快来划水\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/klhs.jpg\" },\r\n            { \"appid\": \"ttce8db83051a7f459\", \"title\": \"春节小火车\", \"icon\": \"https://hs.yz061.com/res/down/public/icon/cd/train.jpg\" },\r\n        ];\r\n        for (var i = 0, len = res.length; i < len; i++) {\r\n            if (res[i].appid != this.appid) {\r\n                this.moreGameAppInfos.push(res[i]);\r\n            }\r\n        }\r\n    };\r\n    TTGameMgr.prototype.showMoreGamesModal = function (data) {\r\n        var _this = this;\r\n        if (!data)\r\n            data = {};\r\n        var appLaunchOptions = [];\r\n        for (var i = 0, len = this.moreGameAppInfos.length; i < len; i++) {\r\n            appLaunchOptions.push({\r\n                appId: this.moreGameAppInfos[i].appid,\r\n                query: \"\",\r\n                extraData: {}\r\n            });\r\n        }\r\n        var onMoreGamesModalClose = function () {\r\n            _this.moreGamesIsShow = false;\r\n            data.closeFun && data.closeFun();\r\n            tt.offNavigateToMiniProgram();\r\n            tt.offMoreGamesModalClose();\r\n        };\r\n        var onNavigateToMiniProgram = function (res) {\r\n            console.log(\"跳转\", res);\r\n        };\r\n        tt.onMoreGamesModalClose(onMoreGamesModalClose);\r\n        tt.onNavigateToMiniProgram(onNavigateToMiniProgram);\r\n        tt.showMoreGamesModal({\r\n            appLaunchOptions: appLaunchOptions,\r\n            success: function (res) {\r\n                console.log(\"success\", res);\r\n                _this.moreGamesIsShow = true;\r\n                data.sucFun && data.sucFun();\r\n            },\r\n            fail: function (res) {\r\n                console.log(\"fail\", res.errMsg);\r\n            }\r\n        });\r\n    };\r\n    TTGameMgr.prototype.showMoreGame = function (data) {\r\n    };\r\n    TTGameMgr.prototype.getAppName = function () {\r\n        if (!this.systemInfo)\r\n            this.systemInfo = tt.getSystemInfoSync();\r\n        return this.systemInfo.appName;\r\n    };\r\n    return TTGameMgr;\r\n}(MiniManeger));\r\nexport { TTGameMgr };\r\n",
  "references": [
    "E:/laya/project/laya_firePeople2_git_ts/src/script/minigame/MiniManeger.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameData.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameEvent.ts",
    "E:/laya/project/laya_firePeople2_git_ts/src/script/common/GameConst.ts"
  ]
}
